/*! angular-socialsharing 18-01-2015 */
!function(window,document){function loadSdkAsync(id,src){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];return d.getElementById(id)?void console.warn("Skipping: Resource with id: "+id+" exists"):(js=d.createElement(s),js.id=id,js.src=src,js.async=!0,void fjs.parentNode.insertBefore(js,fjs))}(document,"script",id)}angular.module("socialsharing.config",[]).value("socialsharing.config",{debug:!0}),angular.module("socialsharing.services",[]),angular.module("socialsharing",["socialsharing.config","socialsharing.services"]),angular.module("socialsharing.services").provider("$fb",function(){function fbAsyncInit(){if(!id)throw"FB App Id Cannot be blank";window.fbAsyncInit=function(){FB.init({appId:id,channelUrl:config.channel,status:!0,xfbml:!0})}}function Facebook($window){this.$window=$window}var id,config={locale:"en_US",channel:"app/channel.html"};return this.init=function(fb_id,fb_config){id=fb_id,fb_config&&angular.forEach(fb_config,function(value,key){config.hasOwnProperty(key)?config[key]=value:console&&console.warn("Ignoring unknown config: "+key)}),loadSdkAsync("facebook-jssdk",["//connect.facebook.net",config.locale,"all.js"].join("/")),fbAsyncInit()},Facebook.prototype.feed=function(params){if(params){if(params.display=params.display||"popup",params.method="feed",!this.$window.FB)throw new Error("FB is not available/initialized");FB.ui(params,function(){})}},Facebook.prototype.parse=function(ele){ele=ele||document,FB.XFBML.parse(ele)},{init:this.init,$get:function($window){return new Facebook($window)}}}),angular.module("socialsharing.services").provider("$twt",function(){var intent_url="https://twitter.com/intent",chars_limit=140,share_url_limit=22,config={trim_text:!1},setDefaultProps=function(params){return params=params||{},angular.forEach(["text","url","hashtags"],function(prop){params.hasOwnProperty(prop)||(params[prop]="")}),params},getCharLeft=function(params){var hashtags_spaces,url_length=params.url.length>share_url_limit?share_url_limit:params.url.length,hashtags_num=""===params.hashtags?0:params.hashtags.split(",").length;switch(hashtags_num){case 0:hashtags_spaces=1;break;case 1:hashtags_spaces=3;break;default:hashtags_spaces=2*hashtags_num}return chars_limit-(params.text.length+url_length+params.hashtags.length+hashtags_spaces+2)};return this.trimText=function(trim){return trim===!0&&(config.trim_text=!0),this},this.init=function(){return loadSdkAsync("twitter-wjs","https://platform.twitter.com/widgets.js"),this},{init:this.init,trimText:this.trimText,$get:function($window,$q,ssUtils){return{intent:function(type,params){type=type||"tweet",params=setDefaultProps(params);var openIntent=function(){var twt_intent=[intent_url,"/",type,"?",ssUtils.encode(params)].join("");$window.open(twt_intent,"","toolbar=0, status=0, width=550, height=420")},trimText=function(){var chars_left=getCharLeft(params);if(config.trim_text&&0>chars_left){var new_len=params.text.length+chars_left-3;params.text=params.text.substring(0,new_len).trim()+"..."}},deferred=$q.defer();deferred.promise.then(function(){trimText()}).then(function(){openIntent()}),deferred.resolve()}}}}}),angular.module("socialsharing.services").factory("ssUtils",function(){return{encode:function(params){var encodedStr="";for(var key in params)if(params.hasOwnProperty(key)){encodedStr&&"&"!==encodedStr[encodedStr.length-1]&&(encodedStr+="&");var value=params[key];if(value instanceof Array)for(var i=0;i<value.length;i++)encodedStr=encodedStr+key+"="+encodeURIComponent(value[i])+"&";else if("object"==typeof value){for(var innerKey in value)if(value.hasOwnProperty(innerKey)){{value[innerKey]}encodedStr=encodedStr+key+"="+encodeURIComponent(value[innerKey])+"&"}}else encodedStr=encodedStr+key+"="+encodeURIComponent(value)}return"&"===encodedStr[encodedStr.length-1]&&(encodedStr=encodedStr.substr(0,encodedStr.length-1)),encodedStr}}})}(window,document);