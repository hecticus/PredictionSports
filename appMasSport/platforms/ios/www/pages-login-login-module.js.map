{"version":3,"sources":["webpack:///./src/app/pages/login/login.module.ts","webpack:///./src/app/pages/login/login.page.html","webpack:///./src/app/pages/login/login.page.scss","webpack:///./src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"pages-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { LoginPage } from './login.page';\r\nimport { Device } from '@ionic-native/device/ngx';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),  \r\n  ],\r\n  providers: [\r\n    Device\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","module.exports = \"<ion-header no-border>\\r\\n  <ion-toolbar>\\r\\n    <div class=\\\"center\\\">\\r\\n      <img src=\\\"assets/img/logo.png\\\" height=\\\"30\\\"/>\\r\\n    </div>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content >\\r\\n    <div class=\\\"toolbar-div\\\">\\r\\n    <ion-title class=\\\"title\\\">¿Ya estás suscrito?</ion-title>\\r\\n  </div>\\r\\n  <ion-label position=\\\"stacked\\\" class=\\\"title_label\\\" color=\\\"danger-primary\\\">Número de teléfono</ion-label>\\r\\n  <ion-item class=\\\"item\\\">\\r\\n    <ion-label>+507 </ion-label>\\r\\n    <ion-input class=\\\"input_login\\\" type=\\\"tel\\\" placeholder=\\\"#12345678\\\" [(ngModel)]=\\\"msisdn\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-label class=\\\"title_label\\\" position=\\\"stacked\\\" color=\\\"danger-primary\\\">Contraseña</ion-label>\\r\\n  <ion-item class=\\\"item\\\">\\r\\n    <ion-input placeholder=\\\"Ingrese el código recibido por SMS.\\\" type=\\\"password\\\" [(ngModel)]=\\\"password\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <div class=\\\"padding-left-right\\\">\\r\\n    <div class=\\\"padding-top-m\\\">\\r\\n      <ion-button shape=\\\"round\\\" size=\\\"default\\\" color=\\\"danger\\\" expand=\\\"block\\\" [disabled]=\\\"(msisdn !== undefined && password !== undefined) ? false : true\\\" (click)=\\\"createOrUpdateClient()\\\">\\r\\n      Iniciar sesion\\r\\n    </ion-button>\\r\\n    </div>\\r\\n    <div class=\\\"padding-top-xs\\\">\\r\\n      <ion-button routerLink='/get-password' shape=\\\"round\\\" size=\\\"default\\\" color=\\\"danger\\\" expand=\\\"block\\\">Obtener Contraseña</ion-button>\\r\\n    </div>\\r\\n    <div class=\\\"padding-top-xs padding-botton-m\\\">\\r\\n      <ion-button (click)=\\\"loginSessionInvited()\\\" shape=\\\"round\\\" size=\\\"default\\\" color=\\\"danger\\\" expand=\\\"block\\\">Entrar como invitado</ion-button>\\r\\n    </div>\\r\\n    <div class=\\\"center\\\">\\r\\n      <a class=\\\"text-size-s\\\" href=\\\"http://www.masmovil.com.pa/\\\">Términos y Condiciones</a>\\r\\n    </div>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","module.exports = \".error-messages {\\n  font-size: 0.9em;\\n  color: red;\\n  text-align: left; }\\n\\n.padding-left-right {\\n  padding-left: 15px;\\n  padding-right: 15px;\\n  margin: 0 auto; }\\n\\n.padding-top-xs {\\n  padding-top: 2px;\\n  margin: 0 auto; }\\n\\n.padding-top-m {\\n  padding-top: 10px;\\n  margin: 0 auto; }\\n\\n.padding-botton-m {\\n  padding-bottom: 10px;\\n  margin: 0 auto; }\\n\\n.text-size-s {\\n  font-size: 0.8em;\\n  text-align: center; }\\n\\n.center {\\n  margin: 0 auto;\\n  text-align: center; }\\n\\n.toolbar-div {\\n  margin: 16px;\\n  width: 92%;\\n  height: 60px;\\n  background-color: #0377B4; }\\n\\n.title {\\n  padding-top: 16px;\\n  text-align: center;\\n  color: #ffffff; }\\n\\n.title_label {\\n  margin-top: 1em;\\n  padding-left: 1em; }\\n\\n.item {\\n  margin-top: 1em; }\\n\\n.input_login {\\n  width: 20px;\\n  margin-left: 3em; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vRDpcXERvY3VtZW50c1xccHJvZ3JhbW1pbmcgcHJvamVjdHNcXGFwcE1hc1Nwb3J0L3NyY1xcYXBwXFxwYWdlc1xcbG9naW5cXGxvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFnQjtFQUNoQixVQUFVO0VBQ1YsZ0JBQWdCLEVBQUE7O0FBRXBCO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixjQUFjLEVBQUE7O0FBRWhCO0VBQ0UsZ0JBQWdCO0VBQ2hCLGNBQWMsRUFBQTs7QUFFaEI7RUFDRSxpQkFBaUI7RUFDakIsY0FBYyxFQUFBOztBQUVoQjtFQUNFLG9CQUFvQjtFQUNwQixjQUFjLEVBQUE7O0FBRWhCO0VBQ0UsZ0JBQWdCO0VBQ2hCLGtCQUFrQixFQUFBOztBQUVwQjtFQUNFLGNBQWM7RUFDZCxrQkFBa0IsRUFBQTs7QUFFcEI7RUFDRSxZQUFZO0VBQ1osVUFBVTtFQUNWLFlBQVk7RUFDWix5QkFBeUIsRUFBQTs7QUFFM0I7RUFDRSxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGNBQWMsRUFBQTs7QUFFaEI7RUFDRSxlQUFlO0VBQ2YsaUJBQWlCLEVBQUE7O0FBRW5CO0VBQ0UsZUFBYyxFQUFBOztBQUVoQjtFQUNFLFdBQVc7RUFDWCxnQkFBZ0IsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5lcnJvci1tZXNzYWdlcyB7XHJcbiAgICBmb250LXNpemU6IDAuOWVtO1xyXG4gICAgY29sb3I6IHJlZDtcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgfVxyXG4ucGFkZGluZy1sZWZ0LXJpZ2h0IHtcclxuICBwYWRkaW5nLWxlZnQ6IDE1cHg7XHJcbiAgcGFkZGluZy1yaWdodDogMTVweDtcclxuICBtYXJnaW46IDAgYXV0bztcclxufVxyXG4ucGFkZGluZy10b3AteHMge1xyXG4gIHBhZGRpbmctdG9wOiAycHg7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbn1cclxuLnBhZGRpbmctdG9wLW17XHJcbiAgcGFkZGluZy10b3A6IDEwcHg7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbn1cclxuLnBhZGRpbmctYm90dG9uLW17XHJcbiAgcGFkZGluZy1ib3R0b206IDEwcHg7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbn1cclxuLnRleHQtc2l6ZS1ze1xyXG4gIGZvbnQtc2l6ZTogMC44ZW07XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbi5jZW50ZXJ7XHJcbiAgbWFyZ2luOiAwIGF1dG87XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbi50b29sYmFyLWRpdiB7XHJcbiAgbWFyZ2luOiAxNnB4O1xyXG4gIHdpZHRoOiA5MiU7XHJcbiAgaGVpZ2h0OiA2MHB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMzc3QjQ7XHJcbn1cclxuLnRpdGxlIHtcclxuICBwYWRkaW5nLXRvcDogMTZweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgY29sb3I6ICNmZmZmZmY7XHJcbn1cclxuLnRpdGxlX2xhYmVsIHtcclxuICBtYXJnaW4tdG9wOiAxZW07XHJcbiAgcGFkZGluZy1sZWZ0OiAxZW07XHJcbn1cclxuLml0ZW0ge1xyXG4gIG1hcmdpbi10b3A6MWVtO1xyXG59XHJcbi5pbnB1dF9sb2dpbiB7XHJcbiAgd2lkdGg6IDIwcHg7IFxyXG4gIG1hcmdpbi1sZWZ0OiAzZW07XHJcbn1cclxuIl19 */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { ConfigurationsService } from '../../services/configurations/configurations.service';\r\nimport { ClientService } from '../../services/client/client.service';\r\nimport { Router} from '@angular/router';\r\nimport { LoadingService } from '../../services/loading/loading.service'\r\nimport { Device } from '@ionic-native/device/ngx';\r\nimport { Platform } from '@ionic/angular';\r\n\r\n\r\nvar AUTH_TOKEN_PREFIX = 'Basic ';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\n \r\nexport class LoginPage implements OnInit, OnDestroy {\r\n  prefix = '507';\r\n  msisdn: string;\r\n  password: string;\r\n  clientJson: any;\r\n  responseInfo: any;\r\n  tokenUser : any;\r\n  responseUpstream : any;\r\n  id_client : any;\r\n  session : any; \r\n  statusResponse: any;\r\n  old_User: any;\r\n  new_User: any;\r\n\r\n  constructor(  \r\n    private config: ConfigurationsService, \r\n    private client: ClientService, private http : HttpClient,\r\n    private  router: Router, private loading: LoadingService,\r\n    private device : Device, public platform : Platform ) { }\r\n\r\n  ngOnInit() { }\r\n\r\n  createOrUpdateClient() {\r\n    var lang = {\r\n      name: 'español',\r\n      id_language:300,\r\n      short_name:'es'\r\n    };\r\n    var log = {\r\n      msisdn: this.prefix + this.msisdn,\r\n      password: this.password,\r\n      upstreamChannel: '' ,\r\n      ua: '',\r\n      platform:'',\r\n      appCodeName:'',\r\n      appName:'',\r\n      language: '',\r\n      cordova:'',\r\n      model:'',\r\n      uuid:'',\r\n      version:'',\r\n      isVirtual: false,\r\n      serial:'',\r\n      onLine: false,\r\n      manufacturer: '',\r\n      id_language: 300\r\n      };\r\n\r\n    log.upstreamChannel =  this.config.getUpstreamChannel();\r\n    this.loading.presentLoading() \r\n    if (this.config.getPlatform() === 'Web') { \r\n        log.ua =  navigator.userAgent;\r\n        log.platform =  navigator.platform;\r\n        log.onLine  =  navigator.onLine;\r\n        log.appCodeName = navigator.appCodeName;\r\n        log.appName = navigator.appName;\r\n        log.language = navigator.language; \r\n\r\n    } else if (this.config.getPlatform() === 'Android' || this.config.getPlatform() === 'iOS'){\r\n        log.cordova = this.device.cordova;\r\n        log.model = this.device.model;\r\n        log.platform = this.device.platform;\r\n        log.uuid = this.device.uuid;\r\n        log.version = this.device.version;\r\n        log.manufacturer = this.device.manufacturer;\r\n        log.isVirtual = this.device.isVirtual;\r\n        log.serial = this.device.serial;   \r\n    }\r\n    //antes id_language era 405 para portugues ahora es 300 para español\r\n    var jData = {\r\n        country : 4,\r\n        language: lang ? lang.id_language : 300,\r\n        device_id : this.config.getDeviceId(),\r\n        upstreamChannel : this.config.getUpstreamChannel(),\r\n        log: log,\r\n        login: this.prefix + this.msisdn,\r\n        password: this.password,\r\n        devices:{},\r\n        subscribe: true\r\n    };\r\n\r\n    var url = this.client.create();\r\n    console.log('createOrUpdateClient -> Payload -> ' + JSON.stringify(jData));\r\n\r\n    var headers = new HttpHeaders();\r\n    headers.append(\"Accept\", 'application/json');\r\n    headers.append('Content-Type', 'application/json' );\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n      'Content-Type':  'application/json'\r\n      })\r\n    };\r\n\r\n    this.http.post(url, jData, httpOptions)\r\n      .toPromise()\r\n      .then(data => {\r\n        this.statusResponse  = data['description']\r\n        this.responseInfo = data['response'];\r\n        this.id_client = this.responseInfo.id_client\r\n\r\n        if(this.statusResponse === 'OK' ){\r\n          localStorage.setItem('id_client',this.responseInfo.id_client)\r\n          if(localStorage.length >1){\r\n            this.old_User = localStorage.getItem('session')\r\n            localStorage.setItem('session',this.responseInfo.user_id)\r\n          }else{\r\n            localStorage.setItem('session',this.responseInfo.user_id)\r\n          }      \r\n        }\r\n\r\n        this.tokenUser = this.responseInfo.auth_token\r\n        this.upstream()\r\n      }, error => {\r\n        this.loading.presentToast('Teléfono o contraseña incorrecto, intente nuevamente!!!.', 'danger')\r\n        console.log(error);\r\n        \r\n      });    \r\n      \r\n      this.msisdn = undefined\r\n      this.password = undefined\r\n  }\r\n\r\n  upstream(){\r\n\r\n    this.session = localStorage.getItem('session');\r\n    var headers = new HttpHeaders();\r\n    headers.append(\"Accept\", 'application/json');\r\n    headers.append('Content-Type', 'application/json' );\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n      'Content-Type':  'application/json'\r\n      })\r\n    };\r\n\r\n  \r\n  if(this.tokenUser !== undefined ){\r\n    headers.append(\"Authorization\", AUTH_TOKEN_PREFIX + this.tokenUser)\r\n  } \r\n\r\n  var config = {\r\n    headers: headers\r\n  };  \r\n\r\n  var body = {\r\n    event_type : 'LOGIN',\r\n    metadata : {\r\n      appVersion : '0.0.2',\r\n      channel : this.config.getPlatform()\r\n    },\r\n    user_id: this.id_client\r\n  }\r\n\r\n  if(this.id_client !== undefined && this.client !== null ){\r\n    var upstream = this.client.upstream(this.id_client)\r\n    this.http.post(upstream, body, config)\r\n      .toPromise()\r\n      .then(data => {\r\n        this.responseUpstream = data['response'];\r\n          \r\n        if(this.session !== this.old_User) {\r\n          this.router.navigateByUrl('/tutorial');\r\n        }else{\r\n          this.router.navigateByUrl('/tabs/predictions');\r\n        }\r\n         \r\n      }, error => {\r\n        this.loading.presentToast('Teléfono o contraseña incorrecto, intente nuevamente!!!.', 'danger')\r\n        console.log(error);\r\n        \r\n      });\r\n    }\r\n  }\r\n\r\n  loginSessionInvited() {\r\n\r\n    var lang = {\r\n      name: 'español',\r\n      id_language:300,\r\n      short_name:'es'\r\n    };\r\n    var log = {\r\n      upstreamChannel: '' ,\r\n      platform:'',\r\n      language: '',\r\n      cordova:'',\r\n      model:'',\r\n      uuid:'',\r\n      version:'',\r\n      serial:'',\r\n      manufacturer: '',\r\n      id_language: 300\r\n      };\r\n\r\n    log.upstreamChannel =  this.config.getUpstreamChannel();\r\n    this.loading.presentLoading() \r\n    if (this.config.getPlatform() === 'Web') { \r\n        log.platform =  navigator.platform;\r\n        log.language = navigator.language; \r\n\r\n    } else {\r\n        log.cordova = this.device.cordova;\r\n        log.model = this.device.model;\r\n        log.platform = this.device.platform;\r\n        log.uuid = this.device.uuid;\r\n        log.version = this.device.version;\r\n        log.manufacturer = this.device.manufacturer;\r\n        log.serial = this.device.serial;   \r\n    }\r\n\r\n    var jData = {\r\n        country : 4,\r\n        language: lang ? lang.id_language : 300,\r\n        device_id : this.config.getDeviceId(),\r\n        upstreamChannel : this.config.getUpstreamChannel(),\r\n        log: log,\r\n        subscribe: true\r\n    };\r\n\r\n    var url = this.client.create();\r\n    console.log('createOrUpdateClient -> Payload -> ' + JSON.stringify(jData));\r\n\r\n    var headers = new HttpHeaders();\r\n    headers.append(\"Accept\", 'application/json');\r\n    headers.append('Content-Type', 'application/json' );\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n      'Content-Type':  'application/json'\r\n    })\r\n    };\r\n    this.http.post(url, jData, httpOptions)\r\n      .toPromise()\r\n      .then(data => {\r\n        this.responseInfo = data['response'];\r\n        localStorage.setItem('id_client', this.responseInfo.id_client)\r\n        this.router.navigateByUrl('/configurations'); \r\n      }, error => {\r\n        console.log(error);\r\n        \r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    console.log(\"Exit\")\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}